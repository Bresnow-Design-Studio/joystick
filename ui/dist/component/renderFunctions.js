!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self)["joystick-ui"]=t()}(this,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t={exports:{}};!function(t,n){var r,o,i=[].slice;r=e,o=function(){var e,t,n,r,o,s,a,c,l,u,d,h,f,p,g;return l=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},a=function(e,t){var n,r,o;for(o=[],n=-1,r=e.length;++n<r;)o=o.concat(t(e[n]));return o},p=function(e,t){var n,r,o;for(o="",n=-1,r=e.length;++n<r;)o+=t(e[n]);return o},f=function(e){return new RegExp(e.toString()+"|").exec("").length-1},d=function(e,t){var n,r,o,i,s;for(i={},n=-1,o=e.length;++n<o;)r=e[n],null!=(s=t[n])&&(null!=i[r]?(Array.isArray(i[r])||(i[r]=[i[r]]),i[r].push(s)):i[r]=s);return i},(e={}).Result=function(e,t){this.value=e,this.rest=t},e.Tagged=function(e,t){this.tag=e,this.value=t},e.tag=function(t,n){return function(r){var o,i;if(null!=(o=n(r)))return i=new e.Tagged(t,o.value),new e.Result(i,o.rest)}},e.regex=function(t){return function(n){var r,o;if(null!=(r=t.exec(n)))return o=r[0],new e.Result(o,n.slice(o.length))}},e.sequence=function(){var t;return t=1<=arguments.length?i.call(arguments,0):[],function(n){var r,o,i,s,a;for(r=-1,o=t.length,a=[],i=n;++r<o;){if(null==(s=(0,t[r])(i)))return;a.push(s.value),i=s.rest}return new e.Result(a,i)}},e.pick=function(){var t,n;return t=arguments[0],n=2<=arguments.length?i.call(arguments,1):[],function(r){var o,i;if(null!=(i=e.sequence.apply(e,n)(r)))return o=i.value,i.value=o[t],i}},e.string=function(t){var n;return n=t.length,function(r){if(r.slice(0,n)===t)return new e.Result(t,r.slice(n))}},e.lazy=function(e){var t;return t=null,function(n){return null==t&&(t=e()),t(n)}},e.baseMany=function(t,n,r,o,i){var s,a,c;for(a=i,c=r?"":[];(null==n||null==n(a))&&null!=(s=t(a));)r?c+=s.value:c.push(s.value),a=s.rest;if(!o||0!==c.length)return new e.Result(c,a)},e.many1=function(t){return function(n){return e.baseMany(t,null,!1,!0,n)}},e.concatMany1Till=function(t,n){return function(r){return e.baseMany(t,n,!0,!0,r)}},e.firstChoice=function(){var e;return e=1<=arguments.length?i.call(arguments,0):[],function(t){var n,r,o;for(n=-1,r=e.length;++n<r;)if(null!=(o=(0,e[n])(t)))return o}},h=function(t){var n;return(n={}).wildcard=e.tag("wildcard",e.string(t.wildcardChar)),n.optional=e.tag("optional",e.pick(1,e.string(t.optionalSegmentStartChar),e.lazy((function(){return n.pattern})),e.string(t.optionalSegmentEndChar))),n.name=e.regex(new RegExp("^["+t.segmentNameCharset+"]+")),n.named=e.tag("named",e.pick(1,e.string(t.segmentNameStartChar),e.lazy((function(){return n.name})))),n.escapedChar=e.pick(1,e.string(t.escapeChar),e.regex(/^./)),n.static=e.tag("static",e.concatMany1Till(e.firstChoice(e.lazy((function(){return n.escapedChar})),e.regex(/^./)),e.firstChoice(e.string(t.segmentNameStartChar),e.string(t.optionalSegmentStartChar),e.string(t.optionalSegmentEndChar),n.wildcard))),n.token=e.lazy((function(){return e.firstChoice(n.wildcard,n.optional,n.named,n.static)})),n.pattern=e.many1(e.lazy((function(){return n.token}))),n},c={escapeChar:"\\",segmentNameStartChar:":",segmentValueCharset:"a-zA-Z0-9-_~ %",segmentNameCharset:"a-zA-Z0-9",optionalSegmentStartChar:"(",optionalSegmentEndChar:")",wildcardChar:"*"},s=function(e,t){if(Array.isArray(e))return p(e,(function(e){return s(e,t)}));switch(e.tag){case"wildcard":return"(.*?)";case"named":return"(["+t+"]+)";case"static":return l(e.value);case"optional":return"(?:"+s(e.value,t)+")?"}},o=function(e,t){return null==t&&(t=c.segmentValueCharset),"^"+s(e,t)+"$"},r=function(e){if(Array.isArray(e))return a(e,r);switch(e.tag){case"wildcard":return["_"];case"named":return[e.value];case"static":return[];case"optional":return r(e.value)}},u=function(e,t,n,r){var o,i,s;if(null==r&&(r=!1),null!=(s=e[t])){if(!((o=n[t]||0)>(Array.isArray(s)?s.length-1:0)))return i=Array.isArray(s)?s[o]:s,r&&(n[t]=o+1),i;if(r)throw new Error("too few values provided for key `"+t+"`")}else if(r)throw new Error("no values provided for key `"+t+"`")},n=function(e,t,r){var o,i;if(Array.isArray(e)){for(o=-1,i=e.length;++o<i;)if(n(e[o],t,r))return!0;return!1}switch(e.tag){case"wildcard":return null!=u(t,"_",r,!1);case"named":return null!=u(t,e.value,r,!1);case"static":return!1;case"optional":return n(e.value,t,r)}},g=function(e,t,r){if(Array.isArray(e))return p(e,(function(e){return g(e,t,r)}));switch(e.tag){case"wildcard":return u(t,"_",r,!0);case"named":return u(t,e.value,r,!0);case"static":return e.value;case"optional":return n(e.value,t,r)?g(e.value,t,r):""}},(t=function(e,n){var i,s,a;if(e instanceof t)return this.isRegex=e.isRegex,this.regex=e.regex,this.ast=e.ast,void(this.names=e.names);if(this.isRegex=e instanceof RegExp,"string"!=typeof e&&!this.isRegex)throw new TypeError("argument must be a regex or a string");if(this.isRegex){if(this.regex=e,null!=n){if(!Array.isArray(n))throw new Error("if first argument is a regex the second argument may be an array of group names but you provided something else");if(i=f(this.regex),n.length!==i)throw new Error("regex contains "+i+" groups but array of group names contains "+n.length);this.names=n}}else{if(""===e)throw new Error("argument must not be the empty string");if(e.replace(/\s+/g,"")!==e)throw new Error("argument must not contain whitespace");if(s={escapeChar:(null!=n?n.escapeChar:void 0)||c.escapeChar,segmentNameStartChar:(null!=n?n.segmentNameStartChar:void 0)||c.segmentNameStartChar,segmentNameCharset:(null!=n?n.segmentNameCharset:void 0)||c.segmentNameCharset,segmentValueCharset:(null!=n?n.segmentValueCharset:void 0)||c.segmentValueCharset,optionalSegmentStartChar:(null!=n?n.optionalSegmentStartChar:void 0)||c.optionalSegmentStartChar,optionalSegmentEndChar:(null!=n?n.optionalSegmentEndChar:void 0)||c.optionalSegmentEndChar,wildcardChar:(null!=n?n.wildcardChar:void 0)||c.wildcardChar},null==(a=h(s).pattern(e)))throw new Error("couldn't parse pattern");if(""!==a.rest)throw new Error("could only partially parse pattern");this.ast=a.value,this.regex=new RegExp(o(this.ast,s.segmentValueCharset)),this.names=r(this.ast)}}).prototype.match=function(e){var t,n;return null==(n=this.regex.exec(e))?null:(t=n.slice(1),this.names?d(this.names,t):t)},t.prototype.stringify=function(e){if(null==e&&(e={}),this.isRegex)throw new Error("can't stringify patterns generated from a regex");if(e!==Object(e))throw new Error("argument must be an object or undefined");return g(this.ast,e,{})},t.escapeForRegex=l,t.concatMap=a,t.stringConcatMap=p,t.regexGroupCount=f,t.keysAndValuesToObject=d,t.P=e,t.newParser=h,t.defaultOptions=c,t.astNodeToRegexString=o,t.astNodeToNames=r,t.getParam=u,t.astNodeContainsSegmentsForProvidedParams=n,t.stringify=g,t},null!==n?t.exports=o():r.UrlPattern=o()}(t,t.exports);var n=t.exports,r=(e="")=>{throw new Error(`[joystick] ${e}`)};const o={events:["readystatechange","pointerlockchange","pointerlockerror","beforecopy","beforecut","beforepaste","freeze","resume","search","securitypolicyviolation","visibilitychange","fullscreenchange","fullscreenerror","webkitfullscreenchange","webkitfullscreenerror","beforexrselect","abort","blur","cancel","canplay","canplaythrough","change","click","close","contextmenu","cuechange","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","error","focus","formdata","input","invalid","keydown","keypress","keyup","load","loadeddata","loadedmetadata","loadstart","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","pause","play","playing","progress","ratechange","reset","resize","scroll","seeked","seeking","select","stalled","submit","suspend","timeupdate","toggle","volumechange","waiting","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend","wheel","auxclick","gotpointercapture","lostpointercapture","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","pointerenter","pointerleave","selectstart","selectionchange","animationend","animationiteration","animationstart","transitionrun","transitionstart","transitionend","transitioncancel","copy","cut","paste","pointerrawupdate"],lifecycle:["onBeforeMount","onMount","onBeforeUnmount"],options:["name","props","state","lifecycle","methods","events","css","render"]},i={options:["render"]},s={name:e=>{"string"!=typeof e&&r("options.name must be a string.")},lifecycle:e=>{e instanceof Object||r("options.lifecycle must be an object.");for(const[t,n]of Object.entries(e))o.lifecycle.includes(t)||r(`options.lifecycle.${t} is not supported.`),"function"!=typeof n&&r(`options.lifecycle.${t} must be assigned a function.`)},methods:e=>{e instanceof Object||r("options.methods must be an object.");for(const[t,n]of Object.entries(e))"function"!=typeof n&&r(`options.methods.${t} must be assigned a function.`)},events:e=>{e instanceof Object||r("options.events must be an object.");for(const t of Object.keys(e)){const[e]=t.split(" ");o.events.includes(e)||r(`${e} is not a supported JavaScript event type.`)}for(const[t,n]of Object.entries(e))"function"!=typeof n&&r(`options.events.${t} must be assigned a function.`)},css:e=>{"string"!=typeof e&&"function"!=typeof e&&r("options.css must be a string or function returning a string.")},render:e=>{"function"!=typeof e&&r("options.render must be a function returning a string.")}};var a=(e="")=>{let t=[],n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];for(let r=0;r<e;r++)t.push(n[Math.floor(16*Math.random())]);return t.join("")},c=(e=[])=>{for(const t of e)t.element&&t.eventType&&t.eventListener&&t.element.removeEventListener(t.eventType,t.eventListener)};const l=(e={})=>Object.entries(e).reduce(((e={},[t,n])=>(e[n.name]=n.value,e)),{}),u=(e=null)=>{if(e){const t=e.tagName&&e.tagName.toLowerCase()||"text";let n={tagName:t,attributes:l(e.attributes),children:[].map.call(e.childNodes,(e=>u(e)))};return"text"===t&&(n=e.textContent),n}},d=e=>"string"==typeof e?document.createTextNode(e):(({tagName:e,attributes:t,children:n})=>{const r=document.createElement(e);for(const[e,n]of Object.entries(t))r.setAttribute(e,n);for(const e of n){const t=d(e);r.appendChild(t)}return r})(e),h=(e,t)=>{const n=[];e.forEach(((e,r)=>{n.push(f(e,t[r]))}));const r=[];for(const n of t.slice(e.length))r.push((e=>(e.appendChild(d(n)),e)));return e=>{if(e){for(const[t,r]of((e,t)=>{const n=[];for(let r=0;r<Math.max(e.length,t.length);r++)n.push([e[r],t[r]]);return n})(n,e.childNodes))t&&"function"==typeof t&&t(r);for(const t of r)t&&"function"==typeof t&&t(e)}return e}},f=(e,t)=>{if(void 0===t)return e=>{e.remove()};if("string"==typeof e||"string"==typeof t)return e!==t?e=>{const n=d(t);return e.replaceWith(n),n}:e=>{};if(e.tagName!==t.tagName)return e=>{const n=d(t);return e.replaceWith(n),n};const n=((e,t)=>{const n=[];for(const[e,r]of Object.entries(t))n.push((t=>(t&&t.setAttribute(e,r),t)));for(const r in e)r in t||n.push((e=>(e&&e.removeAttribute(r),e)));return e=>{for(const t of n)t&&"function"==typeof t&&t(e)}})(e.attributes,t.attributes),r=h(e.children,t.children);return e=>(n(e),r(e),e)},p=new RegExp(/\<\!\-\-(?:.|\n|\r)*?-->/g);class g{constructor(e={},t={},c=null){((e={})=>{i.options.every((t=>Object.keys(e).includes(t)))||r(`component options must include ${i.options.join(",")}.`);for(const[t,n]of Object.entries(e)){o.options.includes(t)||r(`${t} is not supported by joystick.component.`);const e=s[t];e&&"function"==typeof e&&e(n)}})(e),this.id=a(8),this.dom={virtual:{},actual:{}},this.options=e||{},this.name="",this.props=e.props||{},this.state={},this.lifecycle={onBeforeMount:()=>null,onMount:()=>null,onBeforeUnmount:()=>null},this.methods={},this.events={},this.css="",this.children=[],this.translations=c,this.handleAttachOptionsToInstance(),"undefined"==typeof window&&(this.url={...t,isActive:e=>!!new n(t.route).match(e)}),"undefined"!=typeof window&&window.__joystick_url__&&(this.url={...window.__joystick_url__,isActive:e=>!!new n(window.__joystick_url__.route).match(e)})}handleGetJoystickInstance(){return"undefined"!=typeof window?b&&b.mountedInstance?b:window.__joystick__:b}handleSetProps(e){this.props=e}handleAttachOptionsToInstance(){this.handleAttachState(this.options?.state),this.handleAttachLifecycleMethods(this.options?.lifecycle),this.handleAttachMethods(this.options?.methods)}handleAttachState(e={}){if("function"==typeof e){const t=e(this);if(t&&"object"==typeof t&&!Array.isArray(t))return void(this.state=Object.assign({},t))}this.state=Object.assign({},e)}handleAttachLifecycleMethods(e={}){this.lifecycle=Object.entries(e).reduce(((e={},[t,n])=>(e[t]=()=>n(this),e)),{})}handleAttachMethods(e={}){this.methods=Object.entries(e).reduce(((e={},[t,n])=>(e[t]=(...e)=>n(...e,this),e)),{})}handleAttachEvents(e=null){const t=((e={})=>Object.entries(e).map((([e,t])=>{const[n,r]=e.split(" ");return{type:n.toLowerCase(),selector:r,handler:t}})))(this.options?.events),n=this;if(this.lifecycle&&this.lifecycle.onBeforeUnmount&&"function"==typeof this.lifecycle.onBeforeUnmount){const e=function(){n.lifecycle.onBeforeUnmount(n)};window.removeEventListener("beforeunload",e),window.addEventListener("beforeunload",e)}const o=this.handleGetJoystickInstance();t.forEach((t=>{o._internal.eventListeners.queue.array.push({callback:()=>{const i=document.querySelector(`[js-c="${this.id}"] ${t.selector}`);i&&(({joystickInstance:e,id:t,parentId:n,element:o,eventType:i,eventListener:s})=>{o||r("Must pass an element to addEventListener."),i||r("Must pass an eventType to addEventListener."),s||r("Must pass an eventListener to addEventListener."),o.addEventListener(i,s),e._internal.eventListeners.attached.push({id:t,eventId:a(8),parentId:n,element:o,eventType:i,eventListener:s})})({joystickInstance:o,id:this.id,parentId:e?.id,element:i,eventType:t.type,eventListener:function(e){Object.defineProperty(e,"target",{value:e.composedPath()[0]}),t.handler(e,n)}})}})}))}handleDetachEvents(){const e=this.handleGetJoystickInstance(),t=e._internal.eventListeners.attached.filter((({id:e,parentId:t})=>e===this.id||t===this.id)),n=t.map((({eventId:e})=>e));c(t),e._internal.eventListeners.attached=e._internal.eventListeners.attached.filter((({eventId:e})=>!n.includes(e)))}handleAttachCSS(){const e=this.handleCompileCSS();if(e){const t=btoa(e.trim()).substring(0,8),n=document.head.querySelector(`[js-c-id="${this.id}"]`),r=document.head.querySelector(`[js-css="${t}"]`);if(n&&!r&&document.head.removeChild(n),!r){const e=document.createElement("style");e.innerHTML=this.handlePrefixCSS(this.options.css,this.id),e.setAttribute("js-c-id",this.id),e.setAttribute("js-css",t),document.head.appendChild(e)}}}handleCompileCSS(){return this.options?.css&&"string"==typeof this.options?.css?this.options.css:this.options?.css&&"function"==typeof this.options?.css?this.options.css(this):""}handlePrefixCSS(e="",t=""){const n=this.handleGetCSSRules(e);return Object.entries(n).map((([e,t])=>t.cssText)).map((e=>`[js-c="${t}"] ${e}`)).join("\n")}handleGetCSSRules(e=""){const t=document.implementation.createHTMLDocument(""),n=document.createElement("style");return n.textContent=e,t.body.appendChild(n),n.sheet.cssRules}handleOnBeforeMount(){this.options.lifecycle&&this.options.lifecycle.onBeforeMount&&this.options.lifecycle.onBeforeMount(this)}handleOnMount(){this.options.lifecycle&&this.options.lifecycle.onMount&&this.options.lifecycle.onMount(this)}handleWrapHTMLForRender(e=""){return`<div js-c="${this.id}">${e}</div>`}getDOMNodeToPatch=(e={})=>{if(e){return document.querySelector(`[js-c="${e?.attributes["js-c"]}"]`)}return null};render(e={}){if(e&&e.mounting){const e=this.renderToDOM({includeActual:!0});return this.dom=e,e.actual}const t=this.renderToDOM({includeActual:!0}),n=f(this.dom.virtual,t.virtual);if(n&&"function"==typeof n){this.handleDetachEvents(),this.dom.actual=n(this.getDOMNodeToPatch(this.dom.virtual)),this.dom.virtual=t.virtual,this.handleAttachCSS(),this.handleAttachEvents();this.handleGetJoystickInstance()._internal.eventListeners.queue.process()}}handleSanitizeHTML(e=""){let t=`${e}`;return(t.match(p)||[]).forEach((e=>{t=t.replace(e,"")})),t}handleGetSanitizedThis(){const e=this,t="function"==typeof e.state?e.state(this):e.state;return e.state=t,e}renderToHTML(e=null,t=null){const n=this.handleGetSanitizedThis(),r=this.options.render({...n,...Object.entries(x).reduce(((r,[o,i])=>(r[o]=i.bind({...n,ssrTree:e,translations:t||this.translations||{}}),r)),{})}),o=this.handleSanitizeHTML(r);return{unwrapped:o,wrapped:this.handleWrapHTMLForRender(o)}}renderToDOM(e={}){const t=this.renderToHTML(),n=u(((e="",t="")=>{if(e&&"string"==typeof e){const n=document.createElement("div");return n.setAttribute("js-c",t),n.innerHTML=e,n}return null})(t.unwrapped,this.id));return{virtual:n,actual:e.includeActual?d(n):null}}setState(e={},t=null){this.state=Object.assign(this.state,e),this.render(),t&&"function"==typeof t&&t()}}class m{constructor(e=[]){this.array=[...e],this.array.push=function(){Array.prototype.push.apply(this,arguments)}}async process(){if(this.array.length>0){const e=this.array.shift();e&&e.callback&&(await e.callback(),this.process())}}}var y={get:(e="",t={})=>{if(fetch)return new Promise(((n,r)=>{const o=JSON.stringify(t.input||{}),i=JSON.stringify(t.output||{}),s={method:"GET",mode:"cors",credentials:"include"};t?.headers&&(s.headers=t?.headers),fetch(`${window.location.origin}/api/_getters/${e}?input=${o}&output=${i}`,s).then((async e=>{const t=await e.json();return t&&t.errors?(console.log("%c❌ get request failed with the following errors:",'background-color: #ffcc00; padding: 7px; font-family: "inherit"; font-size: 11px; line-height: 10px; color: #000;'),t.errors.forEach((e=>{console.log(e.message),e.stack&&console.log(e.stack)})),r(t)):(n(t),t)})).catch((e=>(console.log("%c❌ get request failed with the following network error:",'background-color: #ffcc00; padding: 7px; font-family: "inherit"; font-size: 11px; line-height: 10px; color: #000;'),console.log(e),r(e),e)))}))},set:(e="",t={})=>{if(fetch)return new Promise(((n,r)=>fetch(`${window.location.origin}/api/_setters/${e}`,{method:"POST",mode:"cors",headers:{...t?.headers||{},"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"}).then((async e=>{const t=await e.json();return t&&t.errors?(console.log("%c❌ set request failed with the following errors:",'background-color: #ffcc00; padding: 7px; font-family: "inherit"; font-size: 11px; line-height: 10px; color: #000;'),t.errors.forEach((e=>{console.log(e.message),e.stack&&console.log(e.stack)})),r(t)):(n(t),t)})).catch((e=>(console.log("%c❌ set request failed with the following network error:",'background-color: #ffcc00; padding: 7px; font-family: "inherit"; font-size: 11px; line-height: 10px; color: #000;'),console.log(e),r(e),e)))))}},w=(e="",t={})=>{if(fetch)return new Promise(((n,r)=>{const o={signup:"signup",login:"login",logout:"logout",recoverPassword:"recover-password",resetPassword:"reset-password"}[e];return fetch(`${window.location.origin}/api/_accounts/${o}`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,origin:window?.location?.origin}),credentials:"include"}).then((async t=>{const o=await t.json();return o&&o.errors?(console.log(`%c❌ accounts.${e} request failed with the following errors:`,'background-color: #ffcc00; padding: 7px; font-family: "inherit"; font-size: 11px; line-height: 10px; color: #000;'),o.errors.forEach((e=>{console.log(e.message),e.stack&&console.log(e.stack)})),r(o)):(n(o),o)})).catch((t=>(console.log(`%c❌ accounts.${e} request failed with the following network error:`,'background-color: #ffcc00; padding: 7px; font-family: "inherit"; font-size: 11px; line-height: 10px; color: #000;'),console.log(t),r(t),t)))}))},v={signup:(e={})=>w("signup",e),login:(e={})=>w("login",e),logout:()=>w("logout"),recoverPassword:(e={})=>w("recoverPassword",e),resetPassword:(e={})=>w("resetPassword",e)};const b={_internal:{eventListeners:{attached:[],queue:new m([])},timers:[],lifecycle:{onBeforeMount:new m([]),onMount:new m([])},tree:{}},component:(e={})=>(t,n={},r={})=>new g({...e,props:t},n,r),mount:(e,t={},n)=>{const r=e(t);b._internal.tree={id:r.id,instance:r,children:[]},b.mountedInstance=!0,"undefined"!=typeof window&&(window.__joystick__=b,window.__joystick__.utils={removeEventListeners:c}),r.handleSetProps(t),r.handleOnBeforeMount(),(()=>{const e=document.querySelector("style[js-css-ssr]"),t=document.querySelectorAll("style[js-css]");e&&e.parentNode.removeChild(e),t&&[].forEach.call(t,(e=>{e.parentNode.removeChild(e)}))})();const o=r.render({mounting:!0});return b._internal.lifecycle.onBeforeMount.process(),((e,t)=>{t&&(t.innerHTML="",t.appendChild(e))})(o,n),r.handleAttachCSS(),r.handleAttachEvents(),b._internal.eventListeners.queue.process(),r.handleOnMount(),b._internal.lifecycle.onMount.process(),r},get:y.get,set:y.set,accounts:v};if("undefined"!=typeof window&&(window.joystick=window.joystick?{...window.joystick,settings:window.__joystick_settings__}:{settings:window.__joystick_settings__}),"undefined"!=typeof window){const e=window.setTimeout,t=window.setInterval;window.setTimeout._tainted||(window.setTimeout=(t=null,n=null)=>{if(t&&n>=0){const r=e(t,n);return b._internal.timers.push({type:"timeout",id:r}),r}},window.setTimeout._tainted=!0),window.setInterval._tainted||(window.setInterval=(e=null,n=null)=>{if(e&&n>=0){const r=t(e,n);return b._internal.timers.push({type:"interval",id:r}),r}},window.setInterval._tainted=!0)}const C=(e={},t="",n={})=>{const r=e&&e.id;if((o=e)&&"object"==typeof o&&!Array.isArray(o)&&r){const r=Object.entries(e);for(let o=0;o<r.length;o+=1){const[i,s]=r[o];if("id"===i&&s===t)return e;if("children"===i&&Array.isArray(s))for(let e=0;e<s.length;e+=1){const r=s[e],o=C(r,t,n);if(null!==o)return o}}}var o;return null},j=function(e,t){try{const n="undefined"!=typeof window?b&&b.mountedInstance?b:window.__joystick__:b,r=e(t,this.url,this.translations);e.instance&&(r.id=e.instance.id),r.parent=this,r.options&&r.options.lifecycle&&(r.options.lifecycle.onBeforeMount&&n._internal.lifecycle.onBeforeMount.array.push({callback:()=>{r.options.lifecycle.onBeforeMount(r)}}),r.options.lifecycle.onMount&&n._internal.lifecycle.onMount.array.push({callback:()=>{r.options.lifecycle.onMount(r)}}));const o=C(r.parent.ssrTree||n._internal.tree,r.parent.id);if(o&&o.children&&o.children.push({id:r.id,instance:r,children:[]}),r.parent&&r.parent.ssrTree){return r.renderToHTML(r.parent.ssrTree).wrapped}const i=r.renderToDOM({includeActual:!0}),s=r.renderToHTML();return r.dom=i,r.handleAttachCSS(),r.handleAttachEvents(r.parent),e.instance=r,s.wrapped}catch(e){console.log(e)}},_=function(e,t){return e.map((e=>t(e))).join("\n")},k=function(e="",t={}){const n="undefined"!=typeof window?window.__joystick_i18n__:this.translations;return n&&n[e]?Object.entries(t).length>0?Object.entries(t).reduce(((e,[t,n])=>e.replace(`{{${t}}}`,n)),n[e]):n[e]:""},S=function(e=!1,t=""){return e?t:""};var x={c:j,component:j,e:_,each:_,i:k,i18n:k,w:S,when:S};return x}));
